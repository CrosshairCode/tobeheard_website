<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TBH Full Page - Organized</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        /* Custom font - Inter */
        body {
            font-family: 'Inter', sans-serif;
            padding: 0;
        }
        /* Fallback for Inter font if not loaded by Tailwind */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');

        /* Global styles that were for specific sections but define broad layout */
        .hero-bg { /* This wraps header and hero content */
            background-color: #bfe0e9;
            color: #1F2937;
        }

        html { height: 100%; }
        body {
            min-height: 100%;
            margin: 0;
            display: flex;
            flex-direction: column;
            overflow-x: hidden; /* Primary guard against horizontal scroll */
        }
        .page-wrapper {
            width: 100%;
            overflow-x: hidden; /* Secondary guard for all content */
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }
        .main-content-area {
            flex-grow: 1;
        }
    </style>
</head>
<body class="flex flex-col min-h-screen">

    <div class="page-wrapper">
        <div class="hero-bg">
            <div class="container mx-auto px-4 pt-6 rounded-lg relative overflow-hidden">
                <div id="header-content-placeholder"></div> <div id="hero-content-placeholder"></div>   </div>
        </div>

        <main class="main-content-area">
            <div id="news-outlet-placeholder"></div>
            <div id="about-us-placeholder"></div>
            <div id="leadership-placeholder"></div>
            <div id="testimonial-placeholder"></div>
        </main>

        <div id="footer-placeholder"></div>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", function() {
            const sections = [
                { id: "header-content-placeholder", url: "sections/header_content.html" },
                { id: "hero-content-placeholder", url: "sections/hero_content.html" },
                { id: "news-outlet-placeholder", url: "sections/news_outlet.html" },
                { id: "about-us-placeholder", url: "sections/about_us.html" },
                { id: "leadership-placeholder", url: "sections/leadership.html" },
                { id: "testimonial-placeholder", url: "sections/testimonial.html" },
                { id: "footer-placeholder", url: "sections/footer.html" }
            ];

            let sectionsLoaded = 0;
            const totalSections = sections.length;

            function checkAllLoaded() {
                sectionsLoaded++;
                if (sectionsLoaded === totalSections) {
                    // You can dispatch a custom event if needed, e.g., for scripts that depend on all content
                    // document.dispatchEvent(new CustomEvent('allSectionsLoaded'));
                    console.log("All sections loaded and scripts processed.");
                }
            }

            sections.forEach(section => {
                fetch(section.url)
                    .then(response => {
                        if (!response.ok) {
                            throw new Error(`HTTP error! status: ${response.status} for ${section.url}`);
                        }
                        return response.text();
                    })
                    .then(data => {
                        const placeholder = document.getElementById(section.id);
                        if (placeholder) {
                            placeholder.innerHTML = data;
                            // After inserting HTML, find and execute any scripts within that HTML
                            // This ensures that scripts scoped to a section are run after their HTML is in the DOM
                            Array.from(placeholder.querySelectorAll("script")).forEach(oldScript => {
                                const newScript = document.createElement("script");
                                Array.from(oldScript.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value));
                                newScript.appendChild(document.createTextNode(oldScript.innerHTML));
                                oldScript.parentNode.replaceChild(newScript, oldScript);
                            });
                            checkAllLoaded();
                        } else {
                            console.error(`Placeholder with ID ${section.id} not found.`);
                            checkAllLoaded(); // Count as loaded even if placeholder is missing to not block potential 'allSectionsLoaded' event
                        }
                    })
                    .catch(error => {
                        console.error(`Error fetching ${section.url}:`, error);
                        checkAllLoaded(); // Count as loaded on error to not block
                    });
            });
        });
    </script>
</body>
</html>